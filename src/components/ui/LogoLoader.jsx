import React, { useEffect, useRef } from 'react';
import gsap from 'gsap';

const LogoLoader = ({ onLoadComplete }) => {
  const loaderRef = useRef(null);
  const logoRef = useRef(null);
  const containerRef = useRef(null);

  useEffect(() => {
    const tl = gsap.timeline({
      onComplete: () => {
        onLoadComplete();
      }
    });

    // Initial state
    gsap.set(logoRef.current, {
      scale: 0.8,
      opacity: 0,
      rotation: -20
    });

    // Logo animation sequence
    tl.to(logoRef.current, {
      duration: 0.8,
      scale: 1,
      opacity: 1,
      rotation: 0,
      ease: "elastic.out(1, 0.7)",
    })
    .to(logoRef.current, {
      duration: 2,
      rotation: 360,
      ease: "power1.inOut"
    })
    .to(logoRef.current, {
      duration: 0.5,
      scale: 1.2,
      ease: "power2.in"
    })
    .to(logoRef.current, {
      duration: 0.5,
      scale: 0,
      opacity: 0,
      ease: "power2.in"
    }, "+=0.2")
    .to(containerRef.current, {
      duration: 0.5,
      opacity: 0,
      ease: "power2.in"
    }, "<");

    return () => {
      tl.kill();
    };
  }, [onLoadComplete]);

  return (
    <div 
      ref={containerRef}
      className="fixed inset-0 flex items-center justify-center bg-black z-50"
    >
      <div 
        ref={loaderRef}
        className="relative w-32 h-32"
      >
        <div
          ref={logoRef}
          className="w-full h-full"
        >
          <svg 
            width="708" 
            height="728" 
            viewBox="0 0 708 728" 
            fill="none" 
            xmlns="http://www.w3.org/2000/svg"
            className="w-full h-full"
          >
            <path d="M458.947 47.4247C513.165 94.4181 534.681 162.298 541.741 232.825C544.389 276.878 543.461 321.183 543.125 365.293C543.048 378.129 543.051 390.964 543.055 403.8C543.053 416.209 543.015 428.618 542.963 441.027C542.941 446.93 542.927 452.833 542.922 458.737C542.906 466.927 542.845 475.116 542.769 483.306C542.742 487.951 542.715 492.597 542.687 497.383C541.792 508.478 540.744 514.578 534.667 523.648C522.902 531.803 515.898 534.634 501.643 534.171C486.425 530.352 478.359 523.415 467.68 512.288C464.021 508.645 460.36 505.005 456.695 501.368C454.929 499.587 453.163 497.805 451.343 495.97C442.19 486.939 432.388 478.687 422.635 470.354C417.937 465.484 391 441.771 391 434.5C389.121 433.764 414.18 456.742 412.245 455.983C400.102 448.745 391.376 438.784 381.681 428.449C367.072 413.134 352.35 398.438 336.429 384.556C324.697 373.847 313.875 362.198 302.852 350.73C292.873 340.605 282.501 331.119 271.818 321.79C266.018 316.6 260.633 311.144 255.224 305.531C254.951 330.351 254.767 355.172 254.641 379.994C254.588 388.412 254.516 396.831 254.423 405.249C253.097 514.779 253.097 514.779 298.389 611.804C326.347 639.788 360.156 648.753 398.299 648.578C462.647 646.94 511.665 621.647 559.428 578.178C561.68 576.167 563.933 574.157 566.253 572.086C598.031 541.76 619.035 501.682 637.247 461.848C660.593 461.848 683.939 461.848 707.992 461.848C688.987 549.742 632.032 627.02 559.428 676.331C526.866 697.421 494.456 711.115 456.847 719.954C454.198 720.652 451.549 721.351 448.819 722.07C382.296 732.535 318.011 720.015 262.906 679.966C205.496 630.738 188.721 556.643 180.941 483.66C179.37 461.192 179.52 438.707 179.656 416.194C179.658 410.052 179.656 403.91 179.651 397.767C179.651 385.063 179.687 372.359 179.752 359.654C179.833 343.385 179.834 327.117 179.81 310.848C179.799 298.24 179.822 285.631 179.857 273.023C179.87 267.018 179.875 261.013 179.869 255.008C179.868 246.669 179.912 238.332 179.97 229.993C179.986 225.261 180.002 220.528 180.019 215.653C180.887 204.448 181.845 198.328 188.016 189.201C198.865 181.852 206.39 178.423 219.409 177.841C235.926 183.952 246.181 195.054 258.761 207.378C264.049 212.378 269.337 217.377 274.639 222.362C278.339 225.843 282.032 229.332 285.717 232.829C295.684 242.273 305.798 251.435 316.241 260.317C319.451 263.241 464.152 404.306 467.459 407.319C467.459 409.718 325.969 273.976 325.969 276.448C327.929 277.268 329.89 278.088 331.91 278.933C342.541 285.132 349.774 293.091 358.246 302.122C369.268 314.49 369.268 314.49 382.565 323.707C382.565 326.106 390 331.82 390 334.292C391.892 335.041 386.349 332.477 388.299 333.25C400.179 340.306 408.698 349.944 418.158 360.06C432.94 375.794 462.667 403.652 479.5 417C479.5 419.399 451.492 398.001 451.492 400.473C454.885 402.16 440.031 393.752 443.492 395.473C450.788 399.335 463.922 403.684 467.459 407.319C467.823 384.185 468.068 361.051 468.236 337.915C468.307 330.074 468.402 322.235 468.526 314.395C469.614 243.696 466.968 169.848 422.152 111.852C396.086 85.5092 362.198 78.788 326.853 78.3247C257.38 79.2262 202.607 107.707 152.643 156.484C146.106 164.709 140.609 173.024 134.957 181.931C137.362 181.931 132.622 181.931 134.957 181.931C133.63 184.7 106.897 224.175 105.543 227C102.035 234.144 118.076 201.758 114.424 208.826C98.2787 240.465 86.235 270.555 78.3609 305.531C77.6815 308.319 77.0021 311.107 76.3021 313.98C61.8342 409.169 88.4728 507.841 142.532 585.099C183.963 642.834 232.9 684.298 293.664 718.946C296.153 720.478 298.643 722.011 301.208 723.589C301.208 724.789 301.208 725.989 301.208 727.225C238.963 722.96 179.247 690.835 131.42 650.884C128.533 648.555 125.647 646.226 122.673 643.826C57.7093 588.065 12.2294 499.361 1.53614 413.24C-6.5928 305.447 16.9909 204.799 85.4354 120.131C126.662 71.7449 174.779 36.1754 234 14.7071C237.37 13.4746 240.739 12.2422 244.211 10.9724C317.793 -10.9365 398.272 -0.657879 458.947 47.4247Z" fill="#9eecff"/>
            <path d="M465 0C535.758 12.273 604.076 83.2254 649.648 160.966C674.969 209.125 708 276.109 708 339C687.952 339 667.905 339 647.25 339C645.272 331.523 643.293 324.045 641.255 316.341C615.577 225.976 582.109 145.231 535.342 75.3333C533.248 72.1894 531.155 69.0455 528.997 65.8063C510.256 39.7421 487.521 22.6406 465 4.70833C465 3.15458 465 1.60083 465 0Z" fill="#9eecff"/>
          </svg>
        </div>
      </div>
    </div>
  );
};

export default LogoLoader;